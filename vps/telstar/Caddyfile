{
	debug
	# metrics { per_host }
	# admin :2019

	servers {
		# https://github.com/fvbommel/caddy-combine-ip-ranges
		trusted_proxies combine {
			# https://github.com/WeidiDeng/caddy-cloudflare-ip
			cloudflare {
				interval 12h # How often cloudflare ip lists are retrieved
				timeout 15s # Maximum time to wait to get a response from cloudflare
			}
			# podman network's IP range
			static 10.89.0.0/26
		}
	}

	# https://github.com/mholt/caddy-dynamicdns
	dynamic_dns {
		provider cloudflare {env.CLOUDFLARE_API_TOKEN}
		domains {
			vic1707.xyz
		}
	}
}

(https) {
	# https://github.com/caddy-dns/cloudflare
	tls {
		dns cloudflare {env.CLOUDFLARE_API_TOKEN}
	}
}

https://vic1707.xyz {
	import https
	redir https://github.com/vic1707
}
